!function(){"use strict";angular.module("mangledWords",["ngSanitize","ui.router","ui.bootstrap"])}(),function(){"use strict";function e(){var e={templateUrl:"app/components/highscore/directives/highscore.table-row.html",restrict:"A",replace:!0};return e}angular.module("mangledWords").directive("tableRow",e)}(),function(){"use strict";function e(e){function t(t){return e.open({controller:"GameModalController",controllerAs:"modal",templateUrl:"app/components/game/modals/game.modal.html",size:"mg",backdrop:"static",resolve:{score:t}})}var n={open:t};return n}function t(e,t,n){function r(){var t={name:a.name,score:a.score};return n.savePlayer(t).then(function(){e.close()})}var a=this;a.cancel=e.dismiss,a.confirm=r,a.name="",a.score=t}angular.module("mangledWords").controller("GameModalController",t).factory("gameModalService",e),e.$inject=["$uibModal"],t.$inject=["$uibModalInstance","score","gameService"]}(),function(){"use strict";function e(e){return{link:function(t,n){var r;r=e,t.$watch("game.gameStarted",function(t){if(t)var a=setInterval(function(){r>0?(r--,n.text(r)):(r=e,n.text(r),clearInterval(a))},1e3);else n.text(r)})}}}angular.module("mangledWords").directive("gameTimer",e),e.$inject=["TIMER"]}(),function(){"use strict";function e(e,t){function n(n){var r=t.defer();return e.get(n).then(function(e){return r.resolve(e.data)},function(e){return r.reject(e.status)}),r.promise}function r(n,r){var a=t.defer();return e.post(n,r).then(function(e){return a.resolve(e.data)},function(e){return a.reject(e.status)}),a.promise}var a={get:n,post:r};return a}angular.module("mangledWords").factory("httpService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,n){function r(){return e.get(t.BASE+t.PLAYERS).then(function(e){return e=n.sortBy(e,"score").reverse()},function(e){return void console.log("Error status: "+e)})}var a={getPlayers:r};return a}angular.module("mangledWords").factory("highscoreService",e),e.$inject=["httpService","URL","_"]}(),function(){"use strict";function e(e){var t=this;t.players=e}angular.module("mangledWords").controller("HighScoreController",e),e.$inject=["players"]}(),function(){"use strict";function e(e,t){function n(){return e.get(t.BASE+t.WORDS).then(function(e){for(var t,n=e.length;n>0;){t=Math.floor(Math.random()*n),n--;var r=e[n];e[n]=e[t],e[t]=r}return e},function(e){return void console.log("Error status: "+e)})}function r(n){return e.post(t.BASE+t.PLAYERS,n).then(function(e){return e},function(e){return void console.log("Error status: "+e)})}var a={getWords:n,savePlayer:r};return a}angular.module("mangledWords").factory("gameService",e),e.$inject=["httpService","URL"]}(),function(){"use strict";function e(e,t,n,r){function a(){if(c.successAlert?c.successAlert=!1:c.dangerAlert&&(c.dangerAlert=!1),c.input.length<u.length)return m+=u.length-c.input.length,m>d.length&&(m=d.length),void(u=c.input);if(c.input=c.input.replace(/ /g,""),c.input.match(/^[A-zÀ-ÿ]+$/)?c.input=c.input.toUpperCase():c.input=c.input.slice(0,-1),u=c.input,c.input.length===d.length){if(c.input===d.toUpperCase()){c.successAlert=!0;var e=Math.floor(Math.pow(1.95,d.length/3))-m;e>0&&(c.maxScore+=e),i++,m=0,n.length!==i&&(c.mangledWord=l(n[i]),d=n[i])}else c.dangerAlert=!0,m+=c.input.length,m>d.length&&(m=d.length);c.input="",u=""}}function o(){i=0,u="",d="",c.dangerAlert=!1,c.gameStarted=!1,c.input="",c.mangledWord="....",c.successAlert=!1;for(var e,t=n.length;t>0;){e=Math.floor(Math.random()*t),t--;var r=n[t];n[t]=n[e],n[e]=r}}function l(e){do for(var t,n=e.split(""),r=n.length;r>0;){t=Math.floor(Math.random()*r),r--;var a=n[r];n[r]=n[t],n[t]=a}while(n.join("")===e);return n.join("")}function s(){d=n[i],c.gameStarted=!0,c.mangledWord=l(n[i]),c.maxScore=0,c.penality=0,e(function(){o(),t.open(c.maxScore)},1e3*r)}var c=this,i=0,u="",d="",m=0;c.inputChanged=a,c.startNewGame=s,c.dangerAlert=!1,c.gameStarted=!1,c.input="",c.maxScore=0,c.mangledWord="....",c.successAlert=!1}angular.module("mangledWords").controller("GameController",e),e.$inject=["$timeout","gameModalService","words","TIMER"]}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("mangledWords").run(e)}(),function(){"use strict";function e(e,r){e.state("main",{url:"/main",templateUrl:"app/components/main/main.html"}).state("game",{url:"/game",templateUrl:"app/components/game/game.html",controller:"GameController",controllerAs:"game",resolve:{words:t}}).state("highscore",{url:"/highscore",templateUrl:"app/components/highscore/highscore.html",controller:"HighScoreController",controllerAs:"hs",resolve:{players:n}}),r.otherwise("/main")}function t(e){return e.getWords()}function n(e){return e.getPlayers()}angular.module("mangledWords").config(e),e.$inject=["$stateProvider","$urlRouterProvider"],t.$inject=["gameService"],n.$inject=["highscoreService"]}(),function(){"use strict";angular.module("mangledWords").constant("TIMER",40).constant("URL",{BASE:"https://mangledwords-e183b.firebaseio.com/",PLAYERS:"players.json",WORDS:"words.json"}).constant("_",window._)}(),function(){"use strict";function e(e){e.debugEnabled(!1)}e.$inject=["$logProvider"],angular.module("mangledWords").config(e)}(),angular.module("mangledWords").run(["$templateCache",function(e){e.put("app/components/game/game.html",'<div class="jumbotron text-center"><div class=game-timer><div class=game-timer-label>TIMER</div><span game-timer></span></div><div class=game-score><div class=game-score-label>SCORE</div><span>{{game.maxScore}}</span></div><div class=game-word>{{game.mangledWord}}</div><div class=game-container><input class="game-input input-lg" ng-disabled=!game.gameStarted type=text ng-model=game.input ng-change=game.inputChanged()></div><p class="alert alert-success" role=alert ng-show=game.successAlert>Correct! You unmangled the word.</p><p class="alert alert-danger" role=alert ng-show=game.dangerAlert>Oh no! Wrong answer.</p><p class="alert alert-warning" role=alert ng-hide="game.dangerAlert || game.successAlert">Unmangle the word and watch out for the time.</p><div class=row><div class=col-xs-6><button ng-disabled=game.gameStarted ng-click=game.startNewGame() type=button class="btn btn-primary btn-lg btn-block">Start</button></div><div class=col-xs-6><button ui-sref=main ui-sref-active=active ng-disabled=game.gameStarted type=button class="btn btn-default btn-lg btn-block">Back</button></div></div></div>'),e.put("app/components/highscore/highscore.html",'<div class="jumbotron text-center"><h1>Highscore</h1><br><p>Check your score or if you haven\'t play yet... give it a try!</p><p><button ui-sref=main ui-sref-active=active type=button class="btn btn-primary btn-lg btn-block">Back</button></p></div><div class=table-responsive><table class="table table-striped text-center"><thead><tr><th class=text-center>Rank</th><th class=text-center>Score</th><th class=text-center>Name</th></tr></thead><tbody><tr table-row ng-repeat="player in hs.players"></tr></tbody></table></div>'),e.put("app/components/main/main.html",'<div class="jumbotron text-center"><h1>Mangled words</h1><br><p>Check your score or if you haven\'t play yet... give it a try!</p><p><button ui-sref=highscore ui-sref-active=active type=button class="btn btn-primary btn-lg btn-block">Highscore</button></p><p><button ui-sref=game ui-sref-active=active type=button class="btn btn-primary btn-lg btn-block">Play the game</button></p></div>'),e.put("app/components/game/modals/game.modal.html",'<div class="modal-header text-center"><h1 class=modal-title>Save your score</h1><div class=game-score>{{modal.score}}</div></div><form name=modalForm><div class="modal-body text-center"><input type=text class="form-control input-lg" ng-model=modal.name placeholder="Your name" required></div><div class="modal-footer text-center"><div class=row><div class=col-xs-6><button class="btn btn-lg btn-block btn-primary" ng-disabled=modalForm.$invalid ng-click=modal.confirm()>Submit</button></div><div class=col-xs-6><button class="btn btn-lg btn-block btn-default" ng-click=modal.cancel()>Cancel</button></div></div></div></form>'),e.put("app/components/highscore/directives/highscore.table-row.html","<tr><td>{{$index+1}}</td><td>{{player.score}}</td><td>{{player.name}}</td></tr>")}]);
//# sourceMappingURL=../maps/scripts/app-1052d4ef2a.js.map
